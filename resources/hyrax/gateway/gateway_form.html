<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ /////////////////////////////////////////////////////////////////////////////
  ~ // This file is part of the "Hyrax Data Server" project.
  ~ //
  ~ //
  ~ // Copyright (c) 2013 OPeNDAP, Inc.
  ~ // Author: Nathan David Potter  <ndp@opendap.org>
  ~ //
  ~ // This library is free software; you can redistribute it and/or
  ~ // modify it under the terms of the GNU Lesser General Public
  ~ // License as published by the Free Software Foundation; either
  ~ // version 2.1 of the License, or (at your option) any later version.
  ~ //
  ~ // This library is distributed in the hope that it will be useful,
  ~ // but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ // MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  ~ // Lesser General Public License for more details.
  ~ //
  ~ // You should have received a copy of the GNU Lesser General Public
  ~ // License along with this library; if not, write to the Free Software
  ~ // Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301
  ~ //
  ~ // You can contact OPeNDAP, Inc. at PO Box 112, Saunderstown, RI. 02874-0112.
  ~ /////////////////////////////////////////////////////////////////////////////
  -->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>OPeNDAP Gateway Service</title>
    <link rel='stylesheet' href='<CONTEXT_PATH /><SERVLET_NAME />/css/contents.css' type='text/css' />
    <script type="text/javascript">
        <!--

        // $Id: www.js 20720 2009-04-08 21:15:29Z jimg $

        // Event handlers for the disposition button.

        // The dap2AsciiData_button handler sends data to a new window. The user can then
        // save the data to a file.

        /*
                <input type="button" value="DAP4 Data DDX" onclick="dataDDX_button()"/>
                <input type="button" value="Xml Data" onclick="dap2XmlData_button()"/>
                <input type="button" value="NetCDF File Out" onclick="dap2NetcdfData_button()"/>

        */


        function ddx_button() {
            datasetID = getDatasetID();
            url = datasetID + ".ddx" ;
            window.open(url, "DDX");
        }

        function rdf_button() {
            datasetID = getDatasetID();
            url = datasetID + ".rdf" ;
            window.open(url, "RDF");
        }

        function dds_button() {
            datasetID = getDatasetID();
            url = datasetID + ".dds";
            window.open(url, "DDS");
        }

        function das_button() {
            datasetID = getDatasetID();
            url = datasetID + ".das";
            window.open(url, "DAS");
        }

        function info_button() {
            datasetID = getDatasetID();
            url = datasetID + ".info";
            window.open(url, "Dataset Information");
        }

        function dap2DataRequestForm_button() {
            datasetID = getDatasetID();
            url = datasetID + ".html";
            window.open(url, "Data Request Form");
        }


        function dap2data_button() {
            datasetID = getDatasetID();
            url = datasetID + ".dods";
            window.open(url, "DAP2 Binary Data");
        }

        function dap2AsciiData_button() {
            datasetID = getDatasetID();
            url = datasetID + ".asc";
            window.open(url, "ASCII Data");
        }


        function dap2XmlData_button() {
            datasetID = getDatasetID();
            url = datasetID + ".xdods";
            window.open(url, "XML Data Response");
        }

        function getDatasetID(){
            var id =  convertToHex(document.forms[0].url.value);
            document.forms[0].datasetID.value  = id;
            return id;
        }


        function dap2NetcdfData_button() {
            datasetID = getDatasetID();
            url = datasetID + ".nc";
            window.open(url, "NetCDF File Out Response");
        }




        function dap4DataRequestForm_button() {
            datasetID = getDatasetID();
            url = datasetID + ".dmr.html";
            window.open(url, "Data Request Form");
        }


        function dmr_button() {
            datasetID = getDatasetID();
            url = datasetID + ".dmr.xml";
            window.open(url, "DMR");
        }

        function dmrRdf_button() {
            datasetID = getDatasetID();
            url = datasetID + ".dmr.rdf";
            window.open(url, "DMR as RDF");
        }

        function dsr_button() {
            datasetID = getDatasetID();
            url = datasetID + ".dsr.html";
            window.open(url, "DSR");
        }

        function dap4NetcdfData_button() {
            datasetID = getDatasetID();
            url = datasetID + "dap.nc";
            window.open(url, "DAP4 NetCDF File Out Response");
        }

        function dap4Data_button() {
            datasetID = getDatasetID();
            url = datasetID + "dap";
            window.open(url, "DAP4 Data Response");
        }


        function dap4AsciiData_button() {
            datasetID = getDatasetID();
            url = datasetID + "dap.csv";
            window.open(url, "DAP4 ASCII Data Response");
        }

        function dap4AsciiData_button() {
            datasetID = getDatasetID();
            url = datasetID + "dap.csv";
            window.open(url, "DAP4 ASCII Data Response");
        }





        function convertToHex(num) {
            var hex = '';
            for (i = 0; i < num.length; i++) {
                if (num.charCodeAt(i).toString(16).toUpperCase().length < 2) {
                    hex += "0" + num.charCodeAt(i).toString(16).toUpperCase();
                } else {
                    hex += num.charCodeAt(i).toString(16).toUpperCase();
                }
            }
            return hex;
        }


        function convertHexToASCII() {
            if (document.XSS.hexhtml.value != '') {
                var hexText = document.XSS.hexhtml.value;
                var testText = hexText.substring(3, hexText.length).split("&#x");
                var resultString = '';
                var sub = '';
                for (i = 0; i < testText.length; i++) {
                    sub = testText[i].substring(testText[i].length - 3, testText[i].length - 1)
                    if (sub.length < 2) {
                        resultString += "%0" + sub;
                        alert(sub, " - ", resultString);
                    } else {
                        resultString += "%" + sub;
                    }
                    document.XSS.ascii.value = unescape(resultString);
                }
            }
        }


        // -->
    </script>
</head>
<body>
<p></p>

<img alt="OPeNDAP Logo" src='<CONTEXT_PATH /><SERVLET_NAME />/images/logo.png'/>
<h1>Gateway Service</h1>
<hr/>
<form action="">
    <table>
        <tr>
            <td></td>

        </tr>
        <tr>
            <td align="right">Data Source URL</td>
            <td>
                <input name="url" type="text" size="140" value=""/>
            </td>

        </tr>
        <tr>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td align="right">
                <input type="button" value="Encode Dataset ID" onclick="getDatasetID()"/>

            </td>
            <td>
            </td>

        </tr>
        <tr>
            <td align="right" >
                 <span class="medium">dataset id</span>
            </td>
            <td>
                <input name="datasetID" type="text" size="140" value="" readonly />
            </td>

        </tr>
    </table>
    <hr />
    <table>
        <!-- ################################ DAP2 UI ################################ -->
        <tr>
            <td align="right"><span class="medium" style="padding-right: 10px;">DAP2 Responses</span></td>
            <td>                <input type="button" value="DAP2 Data Request Form" onclick="dap2DataRequestForm_button()"/>

            </td>
        </tr>
        <tr>
            <td align="right"><span class="small" style="align-items: right;">Metadata</span></td>
            <td >
                <input type="button" value="DDS" onclick="dds_button()"/>
                <input type="button" value="DAS" onclick="das_button()"/>
                <input type="button" value="INFO" onclick="info_button()"/>
                <input type="button" value="DDX" onclick="ddx_button()"/>
                <input type="button" value="RDF" onclick="rdf_button()"/>
            </td>

        </tr>
        <tr>
            <td align="right"><span class="small" style="align-items: right;">Data</span></td>
            <td>
                <input type="button" value="DAP2 Binary Data" onclick="dap2data_button()"/>
                <input type="button" value="Ascii Data" onclick="dap2AsciiData_button()"/>
                <input type="button" value="Xml Data" onclick="dap2XmlData_button()"/>
                <input type="button" value="NetCDF File Out" onclick="dap2NetcdfData_button()"/>
            </td>
        </tr>
    </table>
    <hr />
    <table>
        <!-- ################################ DAP4 UI ################################ -->
        <tr>
            <td align="right"><span class="medium" style="padding-right: 10px;">DAP4 Responses</span></td>
            <td>                <input type="button" value="DAP4 Data Request Form" onclick="dap4DataRequestForm_button()"/>

            </td>
        </tr>
        <tr>
            <td align="right"><span class="small" style="align-items: right;">Metadata</span></td>
            <td >
                <input type="button" value="DMR" onclick="dmr_button()"/>
                <input type="button" value="DSR" onclick="dsr_button()"/>
                <input type="button" value="RDF" onclick="dmrRdf_button()"/>
            </td>

        </tr>
        <tr>
            <td align="right"><span class="small" style="align-items: right;">Data</span></td>
            <td>
                <input type="button" value="DAP4 Binary Data" onclick="dap4Data_button()"/>
                <input type="button" value="Ascii Data" onclick="dap4AsciiData_button()"/>
                <input type="button" value="NetCDF File Out" onclick="dap4NetcdfData_button()"/>
            </td>
        </tr>
    </table>
    <hr />
    <h3>OPeNDAP Hyrax (@HyraxVersion@)</h3>
</form>
</body>
</html>